nosana:
  description: p Python Tests

global:
  image: python:3.10

jobs:
  - name: Install dependencies
    commands:
      # Initialize
      - curl -sS https://sh.rustup.rs | sh -s -- -y
      - . "$HOME/.cargo/env"
      - pip install .[dev]
      - 
      - nucypher --help
      - python -c "import nucypher; print(nucypher.__version__)"
      - python -m pytest tests/unit
      - python -m pytest tests/integration
      - python -m pytest agents
      - python -m pytest actors
      - python -m pytest conditions
      - python -m pytest characters
      - python -m pytest cli
      
  - name: Check Python Entrypoint
    commands:
      - python -c "import nucypher; print(nucypher.__version__)"
  - name: Unit Tests (Coverage)
    commands: 
      - python -m pytest tests/integration
      - python -m coverage run --data-file=unit_data -m pytest tests/unit
      - python -m coverage xml -i --data-file=unit_data -o unit-coverage.xml
